Version 4
SHEET 1 1348 1032
WIRE 192 -288 192 -320
WIRE 192 -288 128 -288
WIRE 128 -272 128 -288
WIRE 128 -176 128 -208
WIRE -16 -160 -32 -160
WIRE 80 -160 48 -160
WIRE 240 -160 224 -160
WIRE 320 -160 304 -160
WIRE -128 -64 -288 -64
WIRE -80 -64 -128 -64
WIRE -32 -64 -32 -160
WIRE -32 -64 -80 -64
WIRE -16 -64 -32 -64
WIRE 80 -64 80 -160
WIRE 80 -64 64 -64
WIRE 128 -64 80 -64
WIRE 224 -64 224 -160
WIRE 224 -64 128 -64
WIRE 240 -64 224 -64
WIRE 320 -64 320 -160
WIRE -288 -16 -288 -64
WIRE -128 -16 -128 -64
WIRE 192 0 192 -288
WIRE 128 16 128 -64
WIRE 160 16 128 16
WIRE 320 32 320 -64
WIRE 320 32 224 32
WIRE 352 32 320 32
WIRE 480 32 432 32
WIRE 544 32 480 32
WIRE 160 48 128 48
WIRE 480 80 480 32
WIRE -704 96 -704 64
WIRE -608 96 -704 96
WIRE -288 96 -288 64
WIRE -128 128 -128 64
WIRE -80 128 -128 128
WIRE -32 128 -80 128
WIRE -16 128 -32 128
WIRE 80 128 64 128
WIRE 128 128 128 48
WIRE 128 128 80 128
WIRE 224 128 128 128
WIRE 368 128 304 128
WIRE -128 160 -128 128
WIRE 192 192 192 64
WIRE 480 192 480 144
WIRE -704 208 -704 96
WIRE -608 208 -608 160
WIRE -32 224 -32 128
WIRE -16 224 -32 224
WIRE 80 224 80 128
WIRE 80 224 48 224
WIRE -816 352 -816 272
WIRE -704 352 -704 288
WIRE 192 432 192 400
WIRE 192 432 128 432
WIRE 128 448 128 432
WIRE 0 528 -32 528
WIRE 256 528 224 528
WIRE 128 544 128 512
WIRE -96 624 -240 624
WIRE -32 624 -32 528
WIRE -32 624 -96 624
WIRE -16 624 -32 624
WIRE 64 624 64 528
WIRE 128 624 64 624
WIRE 224 624 224 528
WIRE 224 624 128 624
WIRE 240 624 224 624
WIRE 320 624 320 528
WIRE -240 656 -240 624
WIRE -96 672 -96 624
WIRE 192 688 192 432
WIRE 128 704 128 624
WIRE 160 704 128 704
WIRE 320 720 320 624
WIRE 320 720 224 720
WIRE 384 720 320 720
WIRE 512 720 464 720
WIRE 576 720 512 720
WIRE 160 736 128 736
WIRE 512 752 512 720
WIRE -240 768 -240 736
WIRE -96 816 -96 752
WIRE -48 816 -96 816
WIRE -16 816 -48 816
WIRE 16 816 -16 816
WIRE 128 816 128 736
WIRE 128 816 96 816
WIRE 208 816 128 816
WIRE 352 816 288 816
WIRE 512 864 512 816
WIRE -96 880 -96 816
WIRE 192 896 192 752
WIRE -16 912 -16 816
WIRE 32 912 -16 912
WIRE 128 912 128 816
WIRE 128 912 96 912
WIRE -96 992 -96 960
FLAG -288 96 0
FLAG -704 352 0
FLAG 544 32 Vout_M
FLAG 368 128 Vref
FLAG -80 128 V2
FLAG -80 -64 V1
FLAG 192 -320 V_batteries
FLAG -96 992 0
FLAG 576 720 Vout_5V
FLAG 352 816 Vref
FLAG -48 816 V4
FLAG -96 624 V3
FLAG 192 400 V_batteries
FLAG 192 896 0
FLAG -240 768 0
FLAG -816 272 Vref
FLAG -816 352 0
FLAG 192 192 0
FLAG -704 64 V_batteries
FLAG -128 160 V_batteries
FLAG 128 -176 0
FLAG 128 544 0
FLAG -608 208 0
FLAG 480 192 0
FLAG 512 864 0
SYMBOL res 336 -80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 110k
SYMATTR SpiceLine tol=0.1 pwr=0.6
SYMBOL res 320 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 110k
SYMATTR SpiceLine tol=0.1 pwr=0.6
SYMBOL res 80 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 10k
SYMATTR SpiceLine tol=0.1 pwr=0.6
SYMBOL res 80 -80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 10k
SYMATTR SpiceLine tol=0.1 pwr=0.6
SYMBOL res 448 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R_ADC_M
SYMATTR Value 100k
SYMATTR SpiceLine tol=1 pwr=0.6
SYMBOL res -144 -32 R0
SYMATTR InstName RM
SYMATTR Value 0.01
SYMATTR SpiceLine tol=1 pwr=1
SYMBOL current -288 -16 M0
WINDOW 123 24 108 Left 2
WINDOW 39 0 0 Left 0
SYMATTR InstName IM
SYMATTR Value 1
SYMBOL res 336 608 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 73.2k
SYMATTR SpiceLine tol=0.1 pwr=0.6
SYMBOL res 304 800 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 73.2k
SYMATTR SpiceLine tol=0.1 pwr=0.6
SYMBOL res 112 800 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 10k
SYMATTR SpiceLine tol=0.1 pwr=0.6
SYMBOL res 80 608 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 10k
SYMATTR SpiceLine tol=0.1 pwr=0.6
SYMBOL res 480 704 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R_ADC_5
SYMATTR Value 100k
SYMATTR SpiceLine tol=1 pwr=0.6
SYMBOL voltage -96 864 R0
WINDOW 0 -14 6 Right 2
WINDOW 3 -60 78 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V_regulator
SYMATTR Value 5
SYMBOL res -112 656 R0
SYMATTR InstName R5V
SYMATTR Value 0.01
SYMATTR SpiceLine tol=1 pwr=1
SYMBOL current -240 656 M0
WINDOW 123 24 108 Left 2
WINDOW 39 0 0 Left 0
SYMATTR InstName I5V
SYMATTR Value {I_load}
SYMBOL OpAmps\\opamp2 192 656 R0
SYMATTR InstName U1
SYMATTR Value2 TLV2372
SYMBOL OpAmps\\opamp2 192 -32 R0
SYMATTR InstName U2
SYMATTR Value2 TLV2372
SYMBOL cap 112 -272 R0
SYMATTR InstName C1
SYMATTR Value 0.1µ
SYMBOL cap 112 448 R0
SYMATTR InstName C2
SYMATTR Value 0.1µ
SYMBOL voltage -704 192 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 14.4
SYMBOL cap -624 96 R0
SYMATTR InstName C3
SYMATTR Value 6.8µ
SYMBOL cap 48 208 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 10p
SYMBOL cap 304 -176 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value 1p
SYMBOL cap 48 -176 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value 10p
SYMBOL cap 64 512 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C7
SYMATTR Value 10p
SYMBOL cap 320 512 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C8
SYMATTR Value 1p
SYMBOL cap 96 896 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C9
SYMATTR Value 10p
SYMBOL cap 464 80 R0
SYMATTR InstName C10
SYMATTR Value 0.1µ
SYMBOL cap 496 752 R0
SYMATTR InstName C11
SYMATTR Value 0.1µ
TEXT -888 616 Left 2 !.step param I_load 0.01 0.5 0.1
TEXT -888 536 Left 2 !.lib TLV2372.LIB
TEXT -888 576 Left 2 !.lib LM324.LIB
TEXT -552 104 Left 2 ;tantalum
TEXT -104 -240 Left 2 ;low-ESR ceramic
TEXT -88 464 Left 2 ;low-ESR ceramic
TEXT -880 496 Left 2 ;replace resistors with 0.1% precision matched metal film
TEXT -888 656 Left 2 !.noise V(Vout_5V) V1 dec 100 1 10Meg
